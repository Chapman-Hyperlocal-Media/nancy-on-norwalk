function Constraint(t,s,i){this.p1=t,this.p2=s,this.rest_length=i||t.currentPosition().subtract(s.currentPosition()).length(),this.squared_rest_length=this.rest_length*this.rest_length}Constraint.prototype={draw:function(){canvas.line(this.p1.currentPosition(),this.p2.currentPosition())},satisfy:function(){var t=this.p1.currentPosition(),s=this.p2.currentPosition(),i=s.subtract(t),n=this.p1.inv_mass,r=this.p2.inv_mass,e=i.squaredLength(),h=(e-this.squared_rest_length)/((this.squared_rest_length+e)*(n+r));0!=n&&this.p1.setCurrentPos(t.add(i.multiply(n*h))),0!=r&&this.p2.setCurrentPos(s.subtract(i.multiply(r*h)))}};