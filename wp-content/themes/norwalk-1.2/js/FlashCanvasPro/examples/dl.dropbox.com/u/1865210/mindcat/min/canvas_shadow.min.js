function canvas_shadow_test(){function t(t,e,r,n,o,l){for(var s=t.createLinearGradient(e,r,n,o),i=10,f=0;i>f;f++){var c=f/(i-1),h=a(c,1,1,l);s.addColorStop(c,h)}return s}function a(t,a,e,r){function n(t){var a=t.toString(16);return 16>t?"0"+a:a}var o=0,l=0,s=0;if(0==a)o=l=s=Math.round(255*e);else{var i=6*(t-Math.floor(t)),f=i-Math.floor(i),c=Math.round(255*e),h=Math.round(255*e*(1-a)),d=Math.round(255*e*(1-a*f)),u=Math.round(255*e*(1-a*(1-f)));switch(Math.floor(i)){case 0:o=c,l=u,s=h;break;case 1:o=d,l=c,s=h;break;case 2:o=h,l=c,s=u;break;case 3:o=h,l=d,s=c;break;case 4:o=u,l=h,s=c;break;case 5:o=c,l=h,s=d}}return r?["rgba(",String(o),",",String(l),",",String(s),",",String(r),")"].join(""):"#"+n(o)+n(l)+n(s)}function e(){try{i.save(),r(i,f,c,"#aaa","#888","#fff")}finally{i.restore()}}function r(t,a,e,r,n,o){t.clearRect(0,0,a,e),o&&(t.fillStyle=o,t.fillRect(0,0,a,e));for(var l=0;e>=l;l+=50)t.beginPath(),t.strokeStyle=l%100==0?n:r,t.lineWidth=l%100==0?1:.5,t.moveTo(0,l),t.lineTo(a,l),t.stroke();for(var s=0;a>=s;s+=50)t.beginPath(),t.strokeStyle=s%100==0?n:r,t.lineWidth=s%100==0?1:.5,t.moveTo(s,0),t.lineTo(s,e),t.stroke()}function n(a){function r(){e();try{i.save(),i.translate(150,150),i.rotate(o),i.translate(-35,-35),i.shadowColor="#0f0",i.shadowOffsetX=40,i.shadowOffsetY=40,i.shadowBlur=20;var r=Math.sin(o);switch(i.globalAlpha=Math.abs(r),a){case"norm":i.fillStyle="navy",i.fillRect(0,0,100,100);break;case"grad":i.lineWidth=30,i.strokeStyle=t(i,0,0,100,100),i.strokeRect(0,0,70,70);break;case"text":i.translate(-80,80),i.font="Bold 80pt Serif",i.fillStyle="red",i.fillText("ABC",0,0);break;case"image":}}finally{i.restore()}}var n,o=0;return r(),function(){l&&l==n?(clearInterval(l),l=n=null):(l&&clearInterval(l),l=n=setInterval(function(){o+=.2,r()},100))}}function o(){function t(){e();try{i.save(),i.translate(150,150),i.rotate(r),i.translate(-150,-150);var t=Math.sin(r);i.globalAlpha=Math.abs(t),i.scale(.8,.8),i.shadowColor="#0f0",i.shadowOffsetX=40,i.shadowOffsetY=40,i.shadowBlur=20,i.lineWidth=30,i.drawImage(n,0,0)}finally{i.restore()}}var a,r=0,n=new Image;return e(),n.onload=function(){t()},n.src="images/alphatest.png",function(){l&&l==a?(clearInterval(l),l=a=null):(l&&clearInterval(l),l=a=setInterval(function(){r+=.2,t()},100))}}var l,s=document.getElementById("canvas"),i=s.getContext("2d"),f=s.width,c=s.height;return e(),n("grad"),{test_norm:n("norm"),test_grad:n("grad"),test_text:n("text"),test_image:o()}}