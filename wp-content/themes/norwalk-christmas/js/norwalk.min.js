jQuery(function(i){function t(){return.001*(new Date).getTime()}function n(i,t){return(i||0)+Math.random()*((t||1)-(i||0))}function e(i,t){this.x=i||0,this.y=t||0,this.add=function(i){this.x+=i.x,this.y+=i.y},this.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)}}function s(i,t,n,s){this.origin=i,this.position=new e(i.x,i.y),this.velocity=t||new e(0,0),this.size=n,this.amplitude=s,this.dx=100*Math.random(),this.update=function(i){this.position.y+=this.velocity.y*i,this.dx+=this.velocity.x*i,this.position.x=this.origin.x+this.amplitude*Math.sin(this.dx)}}!function(){for(var i=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),e=Math.max(0,16-(n-i)),s=window.setTimeout(function(){t(n+e)},e);return i=n+e,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(i){clearTimeout(i)})}(),window.addEventListener?(window.addEventListener("resize",function(){a.resize(window.innerWidth,240),a.init()},!1),window.addEventListener("load",function(){a.init(),a.start()},!1)):window.attachEvent("onload",function(){a.init(),document.getElementById("particle_canvas").width=i(window).innerWidth(),a.start()},!1);var a={canvas:null,ctx:null,particles:[],running:!1,start_time:0,frame_time:0,init:function(){this.canvas=document.getElementById("particle_canvas"),this.ctx=this.canvas.getContext("2d"),i("header .snowcap.side").appendTo("#main-content"),this.resize(window.innerWidth,jQuery("#mainhead").innerHeight()),this.pAmount=3500,this.pSize=[.3,2],this.pSwing=[.1,1],this.pSpeed=[40,100],this.pAmplitude=[25,50],window.addEventListener||(this.pAmount=1500),this._init_particles()},start:function(){this.running=!0,this.start_time=this.frame_time=t(),this._loop()},stop:function(){this.running=!1},resize:function(t,n){this.canvas.width=t,this.canvas.height=n,i("#logo .snowcap-container").attr("style","").css({width:i("#logo .snowcap-container").width()-161}),i(".snowcap").css({opacity:1})},_loop:function(){a.running&&(a._clear(),a._update(),a._draw(),a._queue())},_init_particles:function(){this.particles.length=0;for(var i=0;i<this.pAmount;i++){var t=new e(n(0,this.canvas.width),n(-this.canvas.height,0)),a=new e(n(this.pSwing[0],this.pSwing[1]),n(this.pSpeed[0],this.pSpeed[1])),o=n(this.pSize[0],this.pSize[1]),h=n(this.pAmplitude[0],this.pAmplitude[1]);this.particles.push(new s(t,a,o,h))}},_update:function(){for(var i=t(),n=i-this.frame_time,e=0;e<this.particles.length;e++){var s=this.particles[e];s.update(n),s.position.y-s.size>this.canvas.height&&(s.position.y=-s.size,s.position.x=s.origin.x=Math.random()*this.canvas.width,s.dx=100*Math.random())}this.frame_time=i},_draw:function(){this.ctx.fillStyle="rgb(255,255,255)";for(var i=0;i<this.particles.length;i++){var t=this.particles[i];this.ctx.fillRect(t.position.x,t.position.y,t.size,t.size)}},_clear:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},_queue:function(){window.requestAnimationFrame(a._loop)}};i(document).ready(function(){})});