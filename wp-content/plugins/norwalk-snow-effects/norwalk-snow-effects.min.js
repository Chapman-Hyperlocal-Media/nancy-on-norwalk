jQuery(function(i){function t(){return.001*(new Date).getTime()}function n(i,t){return(i||0)+Math.random()*((t||1)-(i||0))}function e(i,t){this.x=i||0,this.y=t||0,this.add=function(i){this.x+=i.x,this.y+=i.y},this.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)}}function s(i,t,n,s){this.origin=i,this.position=new e(i.x,i.y),this.velocity=t||new e(0,0),this.size=n,this.amplitude=s,this.dx=100*Math.random(),this.update=function(i){this.position.y+=this.velocity.y*i,this.dx+=this.velocity.x*i,this.position.x=this.origin.x+this.amplitude*Math.sin(this.dx)}}!function(){for(var i=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),e=Math.max(0,16-(n-i)),s=window.setTimeout(function(){t(n+e)},e);return i=n+e,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(i){clearTimeout(i)})}(),window.addEventListener?(window.addEventListener("resize",function(){o.resize(window.innerWidth,240),setTimeout(function(){o.init()},100)},!1),window.addEventListener("load",function(){o.init(),o.start()},!1)):window.attachEvent("onload",function(){o.init(),document.getElementById("particle_canvas").width=i(window).innerWidth(),o.start()},!1);var o={canvas:null,ctx:null,particles:[],running:!1,start_time:0,frame_time:0,init:function(){this.canvas=document.getElementById("particle_canvas"),this.ctx=this.canvas.getContext("2d"),this.resize(window.innerWidth,jQuery("#mainhead").innerHeight()),this.pAmount=3500,this.pSize=[.3,2],this.pSwing=[.1,1],this.pSpeed=[40,100],this.pAmplitude=[25,50],window.addEventListener||(this.pAmount=1500),this._init_particles()},start:function(){this.running=!0,this.start_time=this.frame_time=t(),this._loop()},stop:function(){this.running=!1},resize:function(t,n){var e=t-i("#wallpaper-side").outerWidth(),s=i("#main-content .content").outerWidth(),o=i("#main-content").outerWidth()-s,a=s-i("#logo span").outerWidth(),r=Math.round(a/2),c=a-r+3,h=i("#logo span").outerWidth(),d=i("#logo h1, #logo h2").css("backgroundColor");this.canvas.width=e,this.canvas.height=n,"rgb(159, 176, 62)"!=d&&"#9fb03e"!=d?(i("#logo span").css({position:"relative"}),i("#logo .snowcap-container").css({width:a+3,marginLeft:h,display:"block"}).find(".left").css({width:r}).end().find(".right").css({width:c,right:0,backgroundPosition:"top right"}),i(".snowcap").css({opacity:1}).filter(".side").css({width:o,display:"block"})):(i("#logo span").css({position:"static"}),i("#logo .snowcap-container, .snowcap.side").css({display:"none"}),i("#logo span .snowcap").css({display:"block",width:"100%",opacity:1}))},_loop:function(){o.running&&(o._clear(),o._update(),o._draw(),o._queue())},_init_particles:function(){this.particles.length=0;for(var i=0;i<this.pAmount;i++){var t=new e(n(0,this.canvas.width),n(-this.canvas.height,0)),o=new e(n(this.pSwing[0],this.pSwing[1]),n(this.pSpeed[0],this.pSpeed[1])),a=n(this.pSize[0],this.pSize[1]),r=n(this.pAmplitude[0],this.pAmplitude[1]);this.particles.push(new s(t,o,a,r))}},_update:function(){for(var i=t(),n=i-this.frame_time,e=0;e<this.particles.length;e++){var s=this.particles[e];s.update(n),s.position.y-s.size>this.canvas.height&&(s.position.y=-s.size,s.position.x=s.origin.x=Math.random()*this.canvas.width,s.dx=100*Math.random())}this.frame_time=i},_draw:function(){this.ctx.fillStyle="rgb(255,255,255)";for(var i=0;i<this.particles.length;i++){var t=this.particles[i];this.ctx.fillRect(t.position.x,t.position.y,t.size,t.size)}},_clear:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},_queue:function(){window.requestAnimationFrame(o._loop)}};i(document).ready(function(){i("#mainhead").prepend('		<canvas id="particle_canvas" style="position:absolute; display:block; top:0; left:0;"></canvas>').children("#logo").append('			<div class="snowcap-container" style="z-index:1; position:absolute; height:25px;	margin-top:-21px;">\r				<div class="snowcap-inner" style="position:relative;">\r					<div class="snowcap left" style="position:absolute; height:25px; background-repeat:"no-repeat"; opacity:0; z-index:1;"></div>\r					<div class="snowcap right" style="position:absolute; height:25px; background-repeat:"no-repeat"; opacity:0; z-index:1;"></div>\r				</div>\r			</div>').find("span").prepend('<div class="snowcap" style="position:absolute; height:25px; background-repeat:no-repeat; opacity:0; z-index:1; top:-21px; right:-3px; width:100%; padding-left:1.7%; background-position:right top; margin-bottom:0;"></div>'),i("#main-content").append('			<div class="snowcap side" style="position:absolute; height:25px; background-repeat:no-repeat; opacity:0; z-index:1; top:-21px; right:0;"></div>'),i(".snowcap").css({backgroundImage:"url('"+snowData.pluginPath+"/images/snowcap.png')"})})});